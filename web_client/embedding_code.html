<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trajectory Chart Embedding</title>
      <style>
        body {
          margin: 0;
        }
        /* Responsive chart wrapper */
            .chart-wrapper {
              max-width: 1600px;          margin: 0 auto;
          position: relative;
        }
  
        /* Chart container with a responsive aspect ratio */
        .chart-container {
          width: 100%;
          padding-top: 75%; /* 4:3 aspect ratio, adjust as needed */
          position: relative;
        }
  
        .chart-container iframe {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          border: 0;
          background: #000;
        }
  
            /* Full width on smaller screens */
            @media (max-width: 899px) {
              .chart-wrapper {
                max-width: 100%;
                margin: 0;
              }
              .chart-container {
                padding-top: 120%; /* Taller aspect ratio for mobile */
              }
            }      </style></head>
<body>

  <div class="chart-wrapper">
    <div id="chartContainer" class="chart-container">
      <iframe
        id="trajectoryChart"
        src="https://sftt-3626f.web.app/embed/trajectory"
        title="SFTT Trajectory Chart"
        loading="lazy"
        allowfullscreen
      ></iframe>
    </div>
  </div>

  <script>
    function setupChart() {
      const iframe = document.getElementById('trajectoryChart');
      // Check if the screen width is mobile-sized
      const isMobile = window.innerWidth < 900;
      const src = new URL(iframe.src);

      if (isMobile) {
        // Add mobile=true parameter for mobile devices
        src.searchParams.set('mobile', 'true');
      } else {
        // Remove the parameter for desktop
        src.searchParams.delete('mobile');
      }
      
      // Update the iframe source only if it has changed
      if (iframe.src !== src.toString()) {
        iframe.src = src.toString();
      }
    }

    // Debounce function to limit how often the resize event is handled
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }

    // Run on load and on debounced resize
    setupChart();
    window.addEventListener("resize", debounce(setupChart, 250));
  </script>

</body>
</html>